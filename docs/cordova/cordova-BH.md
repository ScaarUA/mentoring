JSMP3.15: Cordova / PhoneGap frameworks  (Bohdan Huseinov)
=========================================================

Поддерживаемые платформы: _android, browser_

## Скрипты 

Прежде всего нужно создать нужную платформу

    npm run prepare:android
    npm run prepare:browser

Потом подготовить все для билда. Команда сначала компилируют весь код вэбпаком, потом копируют все содержимое в папку кордовы

    npm run copy:dist
    
И теперь можно создавать билд

    npm run build:android
    
Впрочем, для удобства сделан скрипт, который все сделает сам, если не нужны никакие промежные манипуляции

    npm run make:android
    
Теперь желательно скопировать сгенерированный билд (в случае с андроидом) в более удобное место. Это роль исполнят следующий скрипт Виталика

    npm run copy:apk
    
Для деплоя на устройство следующая команда

    npm run deploy:android
    
Для браузера Виталик сделал скрипт

    npm run cordova:emulate
    
### Что было сделано

1. Добавлены иконки для андроид приложения. В кордове это делается просто путем добавления самих иконок и прописывания соответствующих ссыланий на них в config.xml . Но на этом этапе мы столкнулись с проблемой того, что иконки в дальнейшем копируются в неправильную директорию и, как оказалось, это проблема кордовы. Обошли эту проблему путем написания хука для самостоятельного копирования этих иконок в правильное место перед добавлением платформы.
(Приложение VKBH с красивой иконкой :) )
![icon](/icon.jpg)

2. Добавлен хук на добавление нужных кордове скриптов для плагинов и самой кордовы. Зачем нужен хук? Это сделано с целью не вставлять несуществующие скрипты, если приложение используется не через кордову, а через сайт. В таком случае скриптов не будет и появятся ошибки. Реализовано это так:
В index.html добавлена строка `<!--cordova-libraries-->`, хук ищет эту строку и заменяет ее на скрипты. Хук сработает только в пределах кордовы перед подготовкой платформы к компайлу, т.е. это никак не заафектит работу в режиме сайта.

3. Добавлен плагин cordova-plugin-device, предназначенный для определения в приложении параметров устройства и кордовы, таких как платформа, версия кордовы, производитель устройства и т.д. Для этого плагина в приложении написан сервис, который имеет три метода isSite, isDevice, isAndroid.
